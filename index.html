<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ADVENTURE-LIFE ¬∑ 2D Block Abenteuer</title>
    <style>
        * {
            box-sizing: border-box;
            user-select: none;
        }
        body {
            margin: 0;
            min-height: 100vh;
            background: #1a2a32;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', monospace;
        }
        .game-wrapper {
            background: #2d4a5e;
            border-radius: 30px;
            padding: 20px;
            box-shadow: 0 20px 30px black;
        }
        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 20px;
            background: #3f5e70;
            box-shadow: inset 0 0 0 4px #1f3a47, 0 10px 15px black;
            cursor: crosshair;
        }
        .stats-panel {
            display: flex;
            justify-content: space-between;
            background: #1e3b4a;
            padding: 12px 20px;
            border-radius: 40px;
            margin-top: 15px;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            border: 3px solid #4e7b99;
            box-shadow: 0 6px 0 #0e1f2a;
        }
        .stats-panel span {
            color: #ffd966;
            text-shadow: 0 2px 0 #7f5f20;
        }
        button {
            background: #ffaa33;
            border: none;
            font-size: 1.3rem;
            font-weight: bold;
            padding: 10px 30px;
            border-radius: 50px;
            box-shadow: 0 8px 0 #b36b00;
            transition: 0.05s linear;
            color: #2d1f00;
            cursor: pointer;
            font-family: inherit;
        }
        button:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #b36b00;
        }
        .lobby-message {
            text-align: center;
            color: #aaf0e9;
            font-size: 1.5rem;
            margin-top: 10px;
            text-shadow: 0 3px 0 #005f5f;
        }
        .title {
            text-align: center;
            color: #ffd966;
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 5px 0 #7f5f20;
            letter-spacing: 3px;
        }
    </style>
</head>
<body>
<div class="game-wrapper">
    <div class="title">ADVENTURE-LIFE</div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <div class="stats-panel">
        <div>‚ù§Ô∏è Leben: <span id="healthDisplay">10</span></div>
        <div>‚öîÔ∏è Level: <span id="levelDisplay">1</span></div>
        <div>üîÆ XP: <span id="xpDisplay">0/10</span></div>
        <div>üèÜ Welt: <span id="worldDisplay">Lobby</span></div>
    </div>

    <div style="display: flex; gap: 20px; justify-content: center; margin-top: 15px;">
        <button id="restartBtn">üîÑ Neustart</button>
        <button id="lobbyBtn">üè† Zur Lobby</button>
    </div>
    <div id="message" class="lobby-message"></div>
</div>

<script>
    (function() {
        // ---------- KONFIGURATION ----------
        const TILE_SIZE = 40;           // Jeder Block 40x40 Pixel
        const PLAYER_SIZE = 30;          // Spielergr√∂√üe (etwas kleiner als Tile)
        const MOB_SIZE = 30;

        // ---------- WELTDEFINITIONEN ----------
        // Jede Welt ist ein 2D-Array (20x15 Tiles) ‚Äì 0 = Luft, 1 = Wand, 2 = T√ºr/Portal
        const lobbyMap = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,1], // Portale zu Welt 1 & 2
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        // Welt 1 ‚Äì Wald
        const world1Map = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
            [1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,1],
            [1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        // Welt 2 ‚Äì H√∂hle (mehr W√§nde)
        const world2Map = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1],
            [1,0,1,1,1,0,0,1,0,0,0,0,1,0,0,1,1,1,0,1],
            [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
            [1,0,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,0,1],
            [1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
            [1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1],
            [1,0,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,0,1],
            [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
            [1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        // ---------- GLOBALE VARIABLEN ----------
        let canvas, ctx;
        let gameRunning = true;

        // Spieler
        let player = {
            x: 200, y: 200,         // Pixelkoordinaten
            health: 10,
            maxHealth: 10,
            level: 1,
            xp: 0,
            xpNeeded: 10,
            attackCooldown: 0,       // Frames bis n√§chster Angriff
            attackDamage: 2,
            invincible: 0            // Nach Treffer unverwundbar
        };

        // Mobs-Array
        let mobs = [];
        let boss = null;              // spezieller Endgegner

        // Aktuelle Welt
        let currentWorld = 'lobby';    // 'lobby', 'world1', 'world2'
        let worldMap = lobbyMap;

        // UI-Elemente
        const healthDisplay = document.getElementById('healthDisplay');
        const levelDisplay = document.getElementById('levelDisplay');
        const xpDisplay = document.getElementById('xpDisplay');
        const worldDisplay = document.getElementById('worldDisplay');
        const messageDiv = document.getElementById('message');

        // Tastensteuerung
        const keys = { w: false, a: false, s: false, d: false };

        // ---------- INITIALISIERUNG ----------
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            resetGame();
            setupEventListeners();
            gameLoop();
        }

        function resetGame() {
            player = {
                x: 200, y: 200,
                health: 10,
                maxHealth: 10,
                level: 1,
                xp: 0,
                xpNeeded: 10,
                attackCooldown: 0,
                attackDamage: 2,
                invincible: 0
            };
            mobs = [];
            boss = null;
            currentWorld = 'lobby';
            worldMap = lobbyMap;
            messageDiv.innerText = 'Willkommen in ADVENTURE-LIFE! Gehe zu einem Portal (gelber Block).';
            updateUI();
            spawnInitialMobs();
        }

        function spawnInitialMobs() {
            if (currentWorld === 'lobby') {
                // In der Lobby keine Mobs
                return;
            }
            if (currentWorld === 'world1') {
                // 3 normale Mobs spawnen
                for (let i = 0; i < 3; i++) {
                    mobs.push(createMob());
                }
            }
            if (currentWorld === 'world2') {
                for (let i = 0; i < 5; i++) {
                    mobs.push(createMob(true)); // st√§rkere Mobs?
                }
            }
        }

        function createMob(strong = false) {
            // Zuf√§llige Position auf freiem Tile
            let x, y;
            do {
                x = Math.floor(Math.random() * 20) * TILE_SIZE + TILE_SIZE/2;
                y = Math.floor(Math.random() * 15) * TILE_SIZE + TILE_SIZE/2;
            } while (!isTileWalkable(x, y));
            return {
                x, y,
                health: strong ? 8 : 4,
                maxHealth: strong ? 8 : 4,
                speed: 1,
                damage: strong ? 2 : 1,
                type: strong ? 'strong' : 'normal',
                attackCooldown: 0
            };
        }

        // ---------- HILFSFUNKTIONEN ----------
        function isTileWalkable(px, py) {
            // Pr√ºft, ob die Pixelposition (px, py) auf einem begehbaren Tile liegt
            const col = Math.floor(px / TILE_SIZE);
            const row = Math.floor(py / TILE_SIZE);
            if (row < 0 || row >= 15 || col < 0 || col >= 20) return false;
            const tile = worldMap[row][col];
            return tile === 0;  // 0 = Luft, 1 = Wand, 2 = Portal
        }

        function isTilePortal(px, py) {
            const col = Math.floor(px / TILE_SIZE);
            const row = Math.floor(py / TILE_SIZE);
            if (row < 0 || row >= 15 || col < 0 || col >= 20) return false;
            return worldMap[row][col] === 2;
        }

        // ---------- SPIELERBEWEGUNG ----------
        function movePlayer() {
            let dx = 0, dy = 0;
            if (keys.w) dy -= 3;
            if (keys.s) dy += 3;
            if (keys.a) dx -= 3;
            if (keys.d) dx += 3;

            if (dx !== 0 || dy !== 0) {
                // Normiere Diagonale nicht, aber wir pr√ºfen einzeln
                let newX = player.x + dx;
                let newY = player.y + dy;

                // Kollision mit W√§nden (einfach gehalten: pr√ºfe die vier Ecken des Spielers)
                if (canMoveTo(newX, player.y)) player.x = newX;
                if (canMoveTo(player.x, newY)) player.y = newY;

                // Portal-Check
                if (isTilePortal(player.x, player.y)) {
                    enterPortal();
                }
            }
        }

        function canMoveTo(x, y) {
            // Pr√ºfe die vier Ecken des Spieler-Rechtecks (Gr√∂√üe PLAYER_SIZE)
            const half = PLAYER_SIZE/2;
            return (isTileWalkable(x - half, y - half) &&
                    isTileWalkable(x + half, y - half) &&
                    isTileWalkable(x - half, y + half) &&
                    isTileWalkable(x + half, y + half));
        }

        function enterPortal() {
            // In der Lobby f√ºhren Portale zu Welten
            if (currentWorld === 'lobby') {
                // Welches Portal? Wir unterscheiden nach Position: In der Lobby sind zwei Portale bei (7,4) und (12,4) in Tile-Koordinaten
                const col = Math.floor(player.x / TILE_SIZE);
                const row = Math.floor(player.y / TILE_SIZE);
                if (col === 7 && row === 4) {
                    changeWorld('world1');
                } else if (col === 12 && row === 4) {
                    changeWorld('world2');
                }
            } else {
                // In einer Welt: Portal bringt zur√ºck zur Lobby
                changeWorld('lobby');
            }
        }

        function changeWorld(worldName) {
            currentWorld = worldName;
            mobs = [];
            boss = null;
            if (worldName === 'lobby') {
                worldMap = lobbyMap;
                messageDiv.innerText = 'Lobby ‚Äì Gehe zu einem gelben Portal.';
                player.x = 200; player.y = 200; // Startposition
            } else if (worldName === 'world1') {
                worldMap = world1Map;
                messageDiv.innerText = 'Welt 1 ‚Äì Besiege alle Mobs! Der Endgegner erscheint sp√§ter.';
                player.x = 200; player.y = 200;
                spawnInitialMobs();
            } else if (worldName === 'world2') {
                worldMap = world2Map;
                messageDiv.innerText = 'Welt 2 ‚Äì Noch gef√§hrlicher!';
                player.x = 200; player.y = 200;
                spawnInitialMobs();
            }
            updateUI();
        }

        // ---------- MOB-LOGIK ----------
        function updateMobs() {
            // Mobs bewegen sich zuf√§llig oder auf Spieler zu
            for (let i = mobs.length - 1; i >= 0; i--) {
                const mob = mobs[i];
                if (mob.health <= 0) {
                    mobs.splice(i, 1);
                    player.xp += 2;
                    checkLevelUp();
                    continue;
                }

                // Einfache KI: Bewegt sich in Richtung Spieler (nicht zu perfekt, mit etwas Zufall)
                const dx = player.x - mob.x;
                const dy = player.y - mob.y;
                const dist = Math.hypot(dx, dy);
                if (dist > 0) {
                    const moveX = (dx / dist) * mob.speed;
                    const moveY = (dy / dist) * mob.speed;
                    // Verschiebung mit Kollisionspr√ºfung (einfach)
                    let newX = mob.x + moveX;
                    let newY = mob.y + moveY;
                    if (isTileWalkable(newX, newY)) {
                        mob.x = newX;
                        mob.y = newY;
                    }
                }

                // Angriff auf Spieler, wenn nah genug
                if (dist < PLAYER_SIZE/2 + MOB_SIZE/2 + 5) {
                    if (player.invincible <= 0) {
                        player.health -= mob.damage;
                        player.invincible = 30; // ca. 0.5 sec bei 60fps
                        if (player.health < 0) player.health = 0;
                        updateUI();
                        if (player.health <= 0) {
                            gameOver();
                        }
                    }
                }
            }

            // Boss-Logik (sp√§ter)
            if (boss && boss.health > 0) {
                // Boss bewegt sich langsam, aber macht mehr Schaden
                const dx = player.x - boss.x;
                const dy = player.y - boss.y;
                const dist = Math.hypot(dx, dy);
                if (dist > 0) {
                    const moveX = (dx / dist) * 0.8;
                    const moveY = (dy / dist) * 0.8;
                    let newX = boss.x + moveX;
                    let newY = boss.y + moveY;
                    if (isTileWalkable(newX, newY)) {
                        boss.x = newX;
                        boss.y = newY;
                    }
                }
                if (dist < PLAYER_SIZE/2 + 40) {
                    if (player.invincible <= 0) {
                        player.health -= 3;
                        player.invincible = 30;
                        updateUI();
                        if (player.health <= 0) gameOver();
                    }
                }
            } else if (boss && boss.health <= 0) {
                // Boss besiegt
                messageDiv.innerText = 'Endgegner besiegt! Gehe zur√ºck zum Portal.';
                boss = null;
                player.xp += 20;
                checkLevelUp();
            }
        }

        // ---------- SPIELER-ANGRIFF (per Mausklick) ----------
        function playerAttack(mouseX, mouseY) {
            if (player.attackCooldown > 0) return;
            if (player.health <= 0) return;

            // Pr√ºfe, ob ein Mob getroffen wurde
            const attackRange = 50; // Pixel
            let hit = false;
            for (let mob of mobs) {
                const dist = Math.hypot(mouseX - mob.x, mouseY - mob.y);
                if (dist < attackRange) {
                    mob.health -= player.attackDamage;
                    hit = true;
                }
            }
            if (boss) {
                const dist = Math.hypot(mouseX - boss.x, mouseY - boss.y);
                if (dist < attackRange) {
                    boss.health -= player.attackDamage;
                    hit = true;
                }
            }
            if (hit) {
                player.attackCooldown = 20; // ca. 0.3 sec
            }
        }

        function checkLevelUp() {
            while (player.xp >= player.xpNeeded) {
                player.level++;
                player.xp -= player.xpNeeded;
                player.xpNeeded = Math.floor(player.xpNeeded * 1.5);
                player.maxHealth += 2;
                player.health = player.maxHealth; // voll geheilt
                player.attackDamage += 1;
                messageDiv.innerText = `Level Up! Jetzt Level ${player.level}`;
            }
            updateUI();
        }

        function updateUI() {
            healthDisplay.innerText = `${player.health}/${player.maxHealth}`;
            levelDisplay.innerText = player.level;
            xpDisplay.innerText = `${player.xp}/${player.xpNeeded}`;
            worldDisplay.innerText = currentWorld === 'lobby' ? 'üè† Lobby' : (currentWorld === 'world1' ? 'üå≤ Welt 1' : 'üï≥Ô∏è Welt 2');
        }

        function gameOver() {
            messageDiv.innerText = 'üíÄ GAME OVER üíÄ Klicke "Neustart"';
            gameRunning = false;
        }

        // ---------- ZEICHNEN ----------
        function draw() {
            ctx.clearRect(0, 0, 800, 600);

            // Tiles zeichnen
            for (let row = 0; row < 15; row++) {
                for (let col = 0; col < 20; col++) {
                    const tile = worldMap[row][col];
                    let color;
                    if (tile === 1) color = '#6b4f3c'; // Wand (braun)
                    else if (tile === 2) color = '#f7d44a'; // Portal (gelb)
                    else color = '#8bb5b0'; // Boden (hellgr√ºn/blau)

                    ctx.fillStyle = color;
                    ctx.fillRect(col * TILE_SIZE, row * TILE_SIZE, TILE_SIZE-1, TILE_SIZE-1);

                    // Gitterlinien
                    ctx.strokeStyle = '#3f5e70';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(col * TILE_SIZE, row * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                }
            }

            // Spieler zeichnen
            ctx.fillStyle = '#4caf50';
            ctx.shadowColor = 'black';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.arc(player.x, player.y, PLAYER_SIZE/2, 0, 2*Math.PI);
            ctx.fill();
            ctx.shadowBlur = 0;

            // Mobs zeichnen
            for (let mob of mobs) {
                ctx.fillStyle = mob.type === 'strong' ? '#d32f2f' : '#ff9800';
                ctx.beginPath();
                ctx.arc(mob.x, mob.y, MOB_SIZE/2, 0, 2*Math.PI);
                ctx.fill();
                // Gesundheitsbalken
                ctx.fillStyle = 'black';
                ctx.fillRect(mob.x-15, mob.y-25, 30, 5);
                ctx.fillStyle = 'lime';
                ctx.fillRect(mob.x-15, mob.y-25, 30 * (mob.health/mob.maxHealth), 5);
            }

            // Boss zeichnen
            if (boss) {
                ctx.fillStyle = '#8e24aa';
                ctx.beginPath();
                ctx.arc(boss.x, boss.y, 40, 0, 2*Math.PI);
                ctx.fill();
                ctx.fillStyle = 'black';
                ctx.fillRect(boss.x-30, boss.y-45, 60, 8);
                ctx.fillStyle = 'lime';
                ctx.fillRect(boss.x-30, boss.y-45, 60 * (boss.health/boss.maxHealth), 8);
            }

            // Cooldown-Anzeige
            if (player.attackCooldown > 0) {
                ctx.fillStyle = 'rgba(255,255,255,0.3)';
                ctx.fillRect(10, 10, 100, 10);
                ctx.fillStyle = 'yellow';
                ctx.fillRect(10, 10, 100 * (1 - player.attackCooldown/20), 10);
            }
        }

        // ---------- GAMELOOP ----------
        function gameLoop() {
            if (!gameRunning) return;

            // Cooldowns runterz√§hlen
            if (player.attackCooldown > 0) player.attackCooldown--;
            if (player.invincible > 0) player.invincible--;

            movePlayer();
            updateMobs();

            // Pr√ºfen, ob alle Mobs tot sind und Boss noch nicht erschienen
            if (currentWorld !== 'lobby' && mobs.length === 0 && !boss) {
                // Boss erscheint
                boss = {
                    x: 400, y: 300,
                    health: 30,
                    maxHealth: 30,
                    speed: 0.8,
                    damage: 3
                };
                messageDiv.innerText = '‚ö†Ô∏è ENDGEGNER ERSCHIENEN! ‚ö†Ô∏è';
            }

            draw();
            requestAnimationFrame(gameLoop);
        }

        // ---------- EVENT LISTENER ----------
        function setupEventListeners() {
            // Tastatur
            window.addEventListener('keydown', (e) => {
                const key = e.key.toLowerCase();
                if (key === 'w') keys.w = true;
                if (key === 'a') keys.a = true;
                if (key === 's') keys.s = true;
                if (key === 'd') keys.d = true;
                // Pfeiltasten auch
                if (key === 'arrowup') keys.w = true;
                if (key === 'arrowdown') keys.s = true;
                if (key === 'arrowleft') keys.a = true;
                if (key === 'arrowright') keys.d = true;
            });
            window.addEventListener('keyup', (e) => {
                const key = e.key.toLowerCase();
                if (key === 'w') keys.w = false;
                if (key === 'a') keys.a = false;
                if (key === 's') keys.s = false;
                if (key === 'd') keys.d = false;
                if (key === 'arrowup') keys.w = false;
                if (key === 'arrowdown') keys.s = false;
                if (key === 'arrowleft') keys.a = false;
                if (key === 'arrowright') keys.d = false;
            });

            // Mausklick f√ºr Angriff
            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const mouseX = (e.clientX - rect.left) * scaleX;
                const mouseY = (e.clientY - rect.top) * scaleY;
                playerAttack(mouseX, mouseY);
            });

            // Touch f√ºr Handy
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const touchX = (touch.clientX - rect.left) * scaleX;
                const touchY = (touch.clientY - rect.top) * scaleY;
                playerAttack(touchX, touchY);
            }, { passive: false });

            // Buttons
            document.getElementById('restartBtn').addEventListener('click', () => {
                resetGame();
                gameRunning = true;
                gameLoop();
            });

            document.getElementById('lobbyBtn').addEventListener('click', () => {
                changeWorld('lobby');
            });
        }

        // Start
        init();
    })();
</script>
</body>
</html>
